<div class="container">
  <div class="row">
    <div class="col-md-11 my-3 mx-auto">
      <div class="d-flex justify-content-center">
        <%= render "searches/form" %>
      </div>

      <div class="row justify-content-center mt-5 mb-3">
        <h3><%= @user.name %>さんのユーザーページ</h3>
          <!--編集orフォローボタン-->
          <% if @user.name == current_user.name %>
            <% unless @user.email == "guest@example.com" then %>
              <div class="ml-3">
                <%= link_to edit_user_path, class: 'btn btn-outline-secondary px-5' do %>
                  <i class="fas fa-user-cog"></i>
                <% end %>
              </div>
            <% end %>
          <% else %>
            <% unless @user.email == "guest@example.com" then %>
              <div class="ml-3">
                <div id="relationship">
                  <%= render "public/relationships/btn", user: @user %>
                </div>
              </div>
            <% end %>
          <% end %>
      </div>

      <div class="row d-flex justify-content-center mt-3 mb-5">
        <!--ユーザー情報-->
        <div class="col-md-3 text-center ml-3">
          <%= image_tag @user.get_profile_image, class: "rounded-circle profile_image_userpage" %>
          <!--いいね、フォロー機能一覧リンク-->
          <% unless @user.email == "guest@example.com" then %>
            <p class="mt-3 mb-2">
              <%= link_to likes_user_path(@user), class: "link" do %>
                <i class="fas fa-heart"></i>いいね一覧
              <% end %>
            </p>
            <p class="my-2">
              <%= link_to "フォロー一覧", user_followings_path(@user), class: "link" %>
            </p>
            <p class="my-2">
              <%= link_to "フォロワー一覧", user_followers_path(@user), class: "link" %>
            </p>
          <% end %>
        </div>

        <div class="col-md-5 mx-3">
          <div class="d-gird gap-3 my-">
            <h4>ユーザー名</h4>
            <%= @user.name %>
          </div>
          <div class="d-gird gap-3 my-5">
            <h4>自己紹介</h4>
            <%= simple_format(@user.introduction) %>
          </div>
        </div>
      </div>
        <!--ユーザーの投稿一覧-->
      <div class="row">
        <% @posts.each do |post| %>
        <div class="col-md-8 d-flex shadow-lg my-3 bg-white no-gutters p-2 mx-auto">

          <div class="align-items-center my-auto">
            <%= link_to post_path(post), data: {"turbolinks" => false} do %>
              <%= image_tag post.photos.first.image.url, class: "photo_content_thumbnail" %>
            <% end %>
          </div>

          <div class="flex-column my-auto ml-3">
            <div class="align-text-center mb-2">
              <%= link_to post_path(post), data: {"turbolinks" => false}, class: "link" do %>
                <h5><strong><%= truncate(post.title, length: 12) %></strong></h5>
              <% end %>
            </div>
            <div class="d-grid gap-2 my-2">
              <%= link_to user_path(post.user), class: "link" do %>
                <%= image_tag post.user.get_profile_image, class: "rounded-circle profile_image" %>
                <%= post.user.name %>
              <% end %>
            </div>
            <div class="my-2">
              <p><%= truncate(post.body, length: 25) %></p>
            </div>
            <div class="d-flex">
              <p class="mr-3">コメント数: <%= post.post_comments.count %></p>
              <div id="like_buttons_<%= post.id %>">
                <%= render "public/likes/likes-btn", post: post %>
              </div>
            </div>
            <div class="tag_list_box">
              <% post.tags.each do |tag| %>
                <%= link_to "#{tag.name}", tag_search_path(tag_id: tag.id), class: "btn btn-outline-secondary btn-sm" %>
              <% end %>
            </div>
          </div>
        </div>
        <% end %>
      </div>

      <div class="pagination justify-content-center">
        <%= paginate @posts %>
      </div>

    </div>
  </div>
</div>
